<?php
/**
 * {{appName}}
 * API Routes - Auto-generated by OpenAPI Generator
 *
 * @version {{appVersion}}
 * @link https://openapi-generator.tech
 */

/**
 * NOTE: This file is auto-generated. Include it in your Laravel application's routes file.
 *
 * Example integration in routes/api.php:
 *
 *   Route::group(['prefix' => 'v1', 'middleware' => ['api']], function ($router) {
 *       require base_path('vendor/{{composerVendorName}}/{{composerPackageName}}/routes.php');
 *   });
 *
 * Or for local development:
 *   Route::group(['prefix' => 'v1', 'middleware' => ['api']], function ($router) {
 *       require base_path('generated/php-lumen/{{packageName}}/lib/routes.php');
 *   });
 */

{{#apiInfo}}
{{#apis}}
{{#operations}}
{{#operation}}
/**
 * {{httpMethod}} {{path}}
 * Operation: {{operationId}}
 * Summary: {{summary}}
 {{#notes}}
 * Notes: {{notes}}
 {{/notes}}
 {{#hasAuthMethods}}
 * Security:
 {{#authMethods}}
 *   - {{name}}{{#scopes}} (scopes: {{#scopes}}{{scope}}{{^-last}}, {{/-last}}{{/scopes}}){{/scopes}}
 {{/authMethods}}
 {{/hasAuthMethods}}
 */
$route = $router->{{httpMethod}}('{{{path}}}', [{{invokerPackage}}\Http\Controllers\{{classname}}Controller::class, '{{operationId}}'])
    ->name('api.{{operationId}}');

{{#hasAuthMethods}}
// Security middleware auto-attachment (based on OpenAPI security requirements)
{{#authMethods}}
if ($router->hasMiddlewareGroup('api.security.{{name}}')) {
    $route->middleware('api.security.{{name}}');
}
{{/authMethods}}
{{/hasAuthMethods}}

// Custom operation-specific middleware (optional)
if ($router->hasMiddlewareGroup('api.middlewareGroup.{{operationId}}')) {
    $route->middleware('api.middlewareGroup.{{operationId}}');
}

{{/operation}}
{{/operations}}
{{/apis}}
{{/apiInfo}}
